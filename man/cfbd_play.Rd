% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cfbd_play.R
\name{cfbd_play}
\alias{cfbd_play}
\alias{cfbd_plays}
\alias{cfbd_play_stats_player}
\alias{cfbd_play_stats_types}
\alias{cfbd_play_types}
\title{CFBD Plays Endpoint}
\source{
\url{https://api.collegefootballdata.com/plays}

\url{https://api.collegefootballdata.com/plays}

\url{https://api.collegefootballdata.com/play/stats}

\url{https://api.collegefootballdata.com/play/stat/types}

\url{https://api.collegefootballdata.com/play/types}
}
\usage{
cfbd_plays(
  year = 2020,
  season_type = "regular",
  week = 1,
  team = NULL,
  offense = NULL,
  defense = NULL,
  conference = NULL,
  offense_conference = NULL,
  defense_conference = NULL,
  play_type = NULL,
  verbose = FALSE
)

cfbd_play_stats_player(
  year = NULL,
  week = NULL,
  team = NULL,
  game_id = NULL,
  athlete_id = NULL,
  stat_type_id = NULL,
  season_type = "regular",
  verbose = FALSE
)

cfbd_play_stats_types()

cfbd_play_types()
}
\arguments{
\item{year}{(\emph{Integer} optional): Year, 4 digit format (\emph{YYYY})}

\item{season_type}{(\emph{String} default regular): Select Season Type: regular, postseason, or both}

\item{week}{(\emph{Integer} optional): Week - values from 1-15, 1-14 for seasons pre-playoff, i.e. 2013 or earlier}

\item{team}{(\emph{String} optional): D-I Team}

\item{offense}{Select offense name (example: Texas, Texas A&M, Clemson)}

\item{defense}{Select defense name (example: Texas, Texas A&M, Clemson)}

\item{conference}{Select conference name (example: ACC, B1G, B12, SEC,\cr
PAC, MAC, MWC, CUSA, Ind, SBC, AAC, Western, MVIAA, SWC, PCC, Big 6, etc.)}

\item{offense_conference}{Select conference name (example: ACC, B1G, B12, SEC,\cr
PAC, MAC, MWC, CUSA, Ind, SBC, AAC, Western, MVIAA, SWC, PCC, Big 6, etc.)}

\item{defense_conference}{Select conference name (example: ACC, B1G, B12, SEC,\cr
PAC, MAC, MWC, CUSA, Ind, SBC, AAC, Western, MVIAA, SWC, PCC, Big 6, etc.)}

\item{play_type}{Select play type (example: see the \link{cfbd_play_type_df})}

\item{verbose}{Logical parameter (TRUE/FALSE, default: FALSE) to return warnings and messages from function}

\item{game_id}{(\emph{Integer} optional): Game ID filter for querying a single game
Can be found using the \code{\link[=cfbd_game_info]{cfbd_game_info()}} function}

\item{athlete_id}{(\emph{Integer} optional): Athlete ID filter for querying a single athlete
Can be found using the \code{\link[=cfbd_player_info]{cfbd_player_info()}} function.}

\item{stat_type_id}{(\emph{Integer} optional): Stat Type ID filter for querying a single stat type
Can be found using the \code{\link[=cfbd_play_stats_types]{cfbd_play_stats_types()}} function}
}
\value{
\code{\link[=cfbd_plays]{cfbd_plays()}} - A data frame with 29 columns:
\describe{
\item{\code{play_id}: character.}{Referencing play id.}
\item{\code{offense}: character.}{Offense on the field.}
\item{\code{offense_conference}: character.}{Conference of the offense on the field.}
\item{\code{defense}: character.}{Defense on the field.}
\item{\code{defense_conference}: character.}{Conference of the defense on the field.}
\item{\code{home}: character.}{Home team.}
\item{\code{away}: character.}{Away team.}
\item{\code{offense_score}: integer.}{Offense's post-play score.}
\item{\code{defense_score}: integer.}{Defense's post-play score.}
\item{\code{game_id}: integer.}{Referencing game id.}
\item{\code{drive_id}: character.}{Referencing drive id.}
\item{\code{drive_number}: integer.}{Drive number in the game.}
\item{\code{play_number}: integer.}{Play number in the game.}
\item{\code{period}: integer.}{Game period (quarter).}
\item{\code{offense_timeouts}: integer.}{Timeouts for the offense at the end of the play.}
\item{\code{defense_timeouts}: integer.}{Timeouts for the defense at the end of the play.}
\item{\code{yard_line}: integer.}{Yard line (~0-50) of the play.}
\item{\code{yards_to_goal}: integer.}{Yards to the goal line (~0-100).}
\item{\code{down}: integer.}{Down of the play.}
\item{\code{distance}: integer.}{Distance to the sticks, i.e. 1st down or goal-line in goal-to-go situations.}
\item{\code{scoring}: logical.}{Scoring play flag.}
\item{\code{yards_gained}: integer.}{Yards net gained by the offense on the play.}
\item{\code{play_type}: character.}{Categorical label of the type of the play.}
\item{\code{play_text}: character.}{A text description of the play.}
\item{\code{ppa}: character.}{Predicted Points Added (calculated by CFBD).}
\item{\code{clock.minutes}: integer.}{Minutes left on the clock.}
\item{\code{clock.seconds}: integer.}{Seconds left on the clock.}
}

\code{\link[=cfbd_play_stats_player]{cfbd_play_stats_player()}} - A data frame with 54 variables:
\describe{
\item{\code{play_id}: character.}{Referencing play id.}
\item{\code{game_id}: integer.}{Referencing game id.}
\item{\code{season}: integer.}{Season of the play.}
\item{\code{week}: integer.}{Week of the play.}
\item{\code{opponent}: character.}{Opponent of the offense on the play.}
\item{\code{team_score}: integer.}{Offense team score.}
\item{\code{opponent_score}: integer.}{Defense team score.}
\item{\code{drive_id}: character.}{Referencing drive id.}
\item{\code{period}: integer.}{Game period (quarter) of the play.}
\item{\code{yards_to_goal}: integer.}{Yards to the goal line (~0-100).}
\item{\code{down}: integer.}{Down of the play.}
\item{\code{distance}: integer.}{Distance to the sticks, i.e. 1st down or goal-line in goal-to-go situations.}
\item{\code{reception_player_id}: character.}{Pass receiver player reference id.}
\item{\code{reception_player}: character.}{Pass receiver player name.}
\item{\code{reception_yds}: integer.}{Reception yards.}
\item{\code{completion_player_id}: character.}{Passing player reference id.}
\item{\code{completion_player}: character.}{Passing player name.}
\item{\code{completion_yds}: integer.}{Passing yards.}
\item{\code{rush_player_id}: character.}{Rushing player reference id.}
\item{\code{rush_player}: character.}{Rushing player name.}
\item{\code{rush_yds}: integer.}{Rushing yards.}
\item{\code{interception_player_id}: character.}{Intercepting player reference id.}
\item{\code{interception_player}: character.}{Intercepting player name.}
\item{\code{interception_stat}: integer.}{Intercepting stat.}
\item{\code{interception_thrown_player_id}: character.}{Interception passing player reference id.}
\item{\code{interception_thrown_player}: character.}{Interception passing player name.}
\item{\code{interception_thrown_stat}: integer.}{Interception thrown stat.}
\item{\code{touchdown_player_id}: character.}{Touchdown scoring player reference id.}
\item{\code{touchdown_player}: character.}{Touchdown scoring player name.}
\item{\code{touchdown_stat}: integer.}{Touchdown scoring stat.}
\item{\code{incompletion_player_id}: character.}{Incomplete receiver player reference id.}
\item{\code{incompletion_player}: character.}{Incomplete receiver player name.}
\item{\code{incompletion_stat}: integer.}{Incomplete stat.}
\item{\code{target_player_id}: character.}{Targeted receiver player reference id.}
\item{\code{target_player}: character.}{Targeted receiver player name.}
\item{\code{target_stat}: integer.}{Target stat.}
\item{\code{fumble_recovered_player_id}: logical.}{Fumble recovering player reference id.}
\item{\code{fumble_recovered_player}: logical.}{Fumble recovering player name.}
\item{\code{fumble_recovered_stat}: logical.}{Fumble recovered stat.}
\item{\code{fumble_forced_player_id}: logical.}{Fumble forcing player reference id.}
\item{\code{fumble_forced_player}: logical.}{Fumble forcing player name.}
\item{\code{fumble_forced_stat}: logical.}{Fumble forced stat.}
\item{\code{fumble_player_id}: logical.}{Fumbling player reference id.}
\item{\code{fumble_player}: logical.}{Fumbling player name.}
\item{\code{fumble_stat}: logical.}{Fumble stat.}
\item{\code{sack_player_id}: character.}{Sacking player(s) reference id.}
\item{\code{sack_player}: character.}{Sacking player(s) name.}
\item{\code{sack_stat}: integer.}{Sack stat.}
\item{\code{sack_taken_player_id}: character.}{Sack taking player reference id.}
\item{\code{sack_taken_player}: character.}{Sack taking player name.}
\item{\code{sack_taken_stat}: integer.}{Sack taken stat.}
\item{\code{pass_breakup_player_id}: logical.}{Pass breakup player reference id.}
\item{\code{pass_breakup_player}: logical.}{Pass breakup player name.}
\item{\code{pass_breakup_stat}: logical.}{Pass breakup (PBU) stat.}
}

\code{\link[=cfbd_play_stats_types]{cfbd_play_stats_types()}} - A data frame with 22 rows and 2 variables:
\describe{
\item{\code{play_stat_type_id}: integer}{Referencing play stat type ID.}
\item{\code{name}: character}{Type of play stats.}
}

\code{\link[=cfbd_play_types]{cfbd_play_types()}} - A data frame with 48 rows and 3 variables:
\describe{
\item{\code{play_type_id}: integer}{Referencing play type id.}
\item{\code{text}: character}{play type description.}
\item{\code{abbreviation}: character}{play type abbreviation used for function call}
}
}
\description{
College football plays data
\describe{
\item{\code{cfbd_plays()}:}{CFBD's College Football Play-by-Play}
\item{\code{cfbd_play_stats_player()}:}{Gets player info associated by play.}
\item{\code{cfbd_play_stats_types()}:}{Gets CFBD play stat types.}
\item{\code{cfbd_play_types()}:}{Gets CFBD play types}
}\if{html}{\out{<div class="r">}}\preformatted{ year_vector <- 2020
 week_vector <- 1:3
 weekly_year_df <- expand.grid(year = year_vector, week = week_vector)
 tictoc::tic()
 year_split <- split(weekly_year_df, weekly_year_df$year)
 for (i in 1:length(year_split)) \{
   i <- 1
   future::plan("multisession")
   progressr::with_progress(\{
      year_split[[i]] <- year_split[[i]] \%>\%
         dplyr::mutate(
            pbp = purrr::map2(
                .x = year,
                .y = week,
                cfbd_plays,
                season_type = "both"
            )
         )
     Sys.sleep(1)
   \})
 \}
 
 tictoc::toc()
 year_split <- lapply(year_split, function(x) \{
     x \%>\% tidyr::unnest(pbp, names_repair = "minimal")
 \})
 
 all_years <- dplyr::bind_rows(year_split)
 glimpse(all_years)
}\if{html}{\out{</div>}}\if{html}{\out{<div class="r">}}\preformatted{cfbd_play_stats_player(game_id = 401110722)
}\if{html}{\out{</div>}}\if{html}{\out{<div class="r">}}\preformatted{cfbd_play_stats_types()
}\if{html}{\out{</div>}}\if{html}{\out{<div class="r">}}\preformatted{cfbd_play_types()
}\if{html}{\out{</div>}}
}
\examples{
\donttest{
  cfbd_play_stats_player(game_id = 401110722)
}
\donttest{
  cfbd_play_stats_types()
}
}
\keyword{PBP}
\keyword{Player}
\keyword{Plays}
